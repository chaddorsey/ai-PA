# [4-2] Create Letta MCP configuration file with proper server connections

[Back to task list](./tasks.md)

## Description

Create a comprehensive Letta MCP configuration file that connects to all MCP servers via the internal Docker network using standardized naming and port conventions. This configuration will enable Letta to access all MCP tools through a consistent interface.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-01-20 19:35:00 | Created | N/A | InProgress | Task file created and implementation started | AI_Agent |
| 2025-01-20 20:00:00 | Status Update | InProgress | Review | Letta MCP configuration created with both legacy JSON and API-based approaches | AI_Agent |

## Requirements

### Functional Requirements
- [x] Create `letta_mcp_config.json` with all MCP server connections
- [x] Use standardized service names and ports from task 4-1
- [x] Configure HTTP transport for all MCP servers
- [x] Enable all MCP servers by default
- [x] Use internal Docker network hostnames for service discovery
- [x] Include proper error handling and retry configuration

### Non-Functional Requirements
- [x] Configuration must be valid JSON format
- [x] Must follow Letta MCP configuration schema
- [x] Must be maintainable and extensible for future MCP servers
- [x] Must support both HTTP and stdio transports
- [x] Must be compatible with Letta's MCP client implementation

## Implementation Plan

### Phase 1: Research Letta MCP Configuration
1. **Review Letta MCP Documentation**
   - Check Letta MCP configuration format requirements
   - Understand supported transport types
   - Review connection and error handling options

2. **Analyze Current MCP Server Endpoints**
   - Verify standardized port assignments from task 4-1
   - Confirm service names and network configuration
   - Test MCP server availability

### Phase 2: Create Configuration File
1. **Design Configuration Structure**
   - Define MCP server connection format
   - Plan for future extensibility
   - Include proper error handling

2. **Implement Configuration**
   - Create `letta_mcp_config.json`
   - Configure all current MCP servers
   - Add placeholder for future RAG MCP server

### Phase 3: Validate Configuration
1. **Test Configuration Format**
   - Validate JSON syntax
   - Check Letta compatibility
   - Verify service discovery

2. **Test MCP Connections**
   - Start Letta with new configuration
   - Verify MCP server connections
   - Test tool availability

## Verification

### Test Plan
- [x] Validate JSON syntax of configuration file
- [ ] Test Letta can start with new configuration
- [ ] Verify all MCP servers are discoverable
- [ ] Test MCP tool functionality through Letta
- [ ] Validate error handling for unavailable servers

### Success Criteria
- [x] Letta MCP configuration file created and valid
- [x] All MCP servers configured with standardized names/ports
- [ ] Letta can connect to all MCP servers successfully
- [ ] MCP tools are available and functional
- [x] Configuration is extensible for future MCP servers

## Files Modified

- [x] `letta/letta_mcp_config.json` - Letta MCP configuration file
- [x] `letta/configure_mcp_servers.py` - API-based configuration script
- [x] `letta/configure_mcp.sh` - Configuration shell script
- [x] `letta/requirements.txt` - Python dependencies
- [x] `docs/delivery/4/4-2-letta-config.md` - Configuration documentation
